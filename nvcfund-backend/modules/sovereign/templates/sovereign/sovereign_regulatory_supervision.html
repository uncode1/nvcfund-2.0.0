{% extends "sovereign/layout.html" %}

{% block title %}Banking Regulation & Supervision{% endblock %}

{% block content %}
<div class="main-content">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0 text-white">
            <i class="fas fa-shield-alt text-primary me-2"></i>
            Banking Regulation & Supervision
        </h1>
        <div class="text-white-50">
            <i class="fas fa-building me-1"></i>
            {{ regulatory_data.banking_sector_overview.total_banks }} Banks Under Supervision
        </div>
    </div>

    <!-- Regulatory Framework -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card border-0">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-percentage me-2"></i>
                        Capital Requirements
                    </h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Minimum Capital Ratio:</span>
                            <span class="fw-bold">{{ "%.1f"|format(regulatory_data.regulatory_framework.capital_requirements.minimum_capital_ratio) }%}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Conservation Buffer:</span>
                            <span class="fw-bold">{{ "%.1f"|format(regulatory_data.regulatory_framework.capital_requirements.capital_conservation_buffer) }%}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Countercyclical Buffer:</span>
                            <span class="fw-bold">{{ "%.1f"|format(regulatory_data.regulatory_framework.capital_requirements.countercyclical_buffer) }%}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Systemic Buffer:</span>
                            <span class="fw-bold">{{ "%.1f"|format(regulatory_data.regulatory_framework.capital_requirements.systemic_buffer) }%}</span>
                        </div>
                    </div>
                    <div class="border-top pt-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted fw-bold">Total Requirement:</span>
                            <span class="fw-bold text-primary">{{ "%.1f"|format(regulatory_data.regulatory_framework.capital_requirements.total_capital_requirement) }%}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-0">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-tint me-2"></i>
                        Liquidity Requirements
                    </h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">LCR Minimum:</span>
                            <span class="fw-bold">{{ "%.0f"|format(regulatory_data.regulatory_framework.liquidity_requirements.liquidity_coverage_ratio) }%}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">NSFR Minimum:</span>
                            <span class="fw-bold">{{ "%.0f"|format(regulatory_data.regulatory_framework.liquidity_requirements.net_stable_funding_ratio) }%}</span>
                        </div>
                    </div>
                    <div>
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Liquidity Buffer:</span>
                            <span class="fw-bold">{{ "%.1f"|format(regulatory_data.regulatory_framework.liquidity_requirements.liquidity_buffer_requirement) }%}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-0">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-balance-scale me-2"></i>
                        Leverage Requirements
                    </h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Minimum Ratio:</span>
                            <span class="fw-bold">{{ "%.1f"|format(regulatory_data.regulatory_framework.leverage_requirements.leverage_ratio_minimum) }%}</span>
                        </div>
                    </div>
                    <div>
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">SIFI Buffer:</span>
                            <span class="fw-bold">{{ "%.1f"|format(regulatory_data.regulatory_framework.leverage_requirements.buffer_for_systemically_important) }%}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Banking Sector Overview -->
    <div class="row mb-4">
        <div class="col-md-8">
            <div class="card border-0">
                <div class="card-header bg-warning text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-building me-2"></i>
                        Banking Sector Overview
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-muted mb-1">Total Banks</h6>
                                <h4 class="text-primary">{{ regulatory_data.banking_sector_overview.total_banks }}</h4>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-muted mb-1">SIFI Banks</h6>
                                <h4 class="text-warning">{{ regulatory_data.banking_sector_overview.systemically_important_banks }}</h4>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-muted mb-1">Foreign Banks</h6>
                                <h4 class="text-info">{{ regulatory_data.banking_sector_overview.foreign_banks }}</h4>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-muted mb-1">Total Assets</h6>
                                <h4 class="text-success">${{ "%.1f"|format(regulatory_data.banking_sector_overview.total_assets_trillions) }}T</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-0">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-chart-pie me-2"></i>
                        Market Concentration
                    </h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Top 5 Banks Share:</span>
                            <span class="fw-bold">{{ "%.1f"|format(regulatory_data.banking_sector_overview.sector_concentration.top_5_banks_market_share) }%}</span>
                        </div>
                        <div class="progress mt-2" style="height: 6px;">
                            <div class="progress-bar bg-warning" style="width: {{ regulatory_data.banking_sector_overview.sector_concentration.top_5_banks_market_share }%}"></div>
                        </div>
                    </div>
                    <div>
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Herfindahl Index:</span>
                            <span class="fw-bold">{{ "%.2f"|format(regulatory_data.banking_sector_overview.sector_concentration.herfindahl_index) }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Supervisory Activities -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card border-0">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-search me-2"></i>
                        On-Site Examinations
                    </h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Scheduled 2025:</span>
                            <span class="fw-bold">{{ regulatory_data.supervisory_activities.on_site_examinations.scheduled_examinations_2025 }}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Completed YTD:</span>
                            <span class="fw-bold text-success">{{ regulatory_data.supervisory_activities.on_site_examinations.completed_ytd }}</span>
                        </div>
                    </div>
                    <div>
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Follow-up Actions:</span>
                            <span class="fw-bold text-warning">{{ regulatory_data.supervisory_activities.on_site_examinations.follow_up_actions }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-0">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-desktop me-2"></i>
                        Off-Site Monitoring
                    </h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Monthly Reports:</span>
                            <span class="fw-bold">{{ regulatory_data.supervisory_activities.off_site_monitoring.monthly_reports_reviewed }}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Stress Tests:</span>
                            <span class="fw-bold">{{ regulatory_data.supervisory_activities.off_site_monitoring.quarterly_stress_tests }}</span>
                        </div>
                    </div>
                    <div>
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Early Warnings:</span>
                            <span class="fw-bold text-warning">{{ regulatory_data.supervisory_activities.off_site_monitoring.early_warning_indicators }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-0">
                <div class="card-header bg-dark text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-gavel me-2"></i>
                        Enforcement Actions
                    </h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Formal Actions YTD:</span>
                            <span class="fw-bold text-danger">{{ regulatory_data.supervisory_activities.enforcement_actions.formal_actions_ytd }}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Informal Actions YTD:</span>
                            <span class="fw-bold text-warning">{{ regulatory_data.supervisory_activities.enforcement_actions.informal_actions_ytd }}</span>
                        </div>
                    </div>
                    <div>
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Penalties Collected:</span>
                            <span class="fw-bold text-success">${{ "%.1f"|format(regulatory_data.supervisory_activities.enforcement_actions.penalty_collections_millions) }}M</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Financial Stability Indicators -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-0">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-heartbeat me-2"></i>
                        Financial Stability Indicators
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <h6 class="text-muted mb-3">Capital Adequacy</h6>
                            <div class="mb-2">
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">Avg Capital Ratio:</span>
                                    <span class="fw-bold text-success">{{ "%.1f"|format(regulatory_data.financial_stability_indicators.capital_adequacy.avg_capital_ratio) }%}</span>
                                </div>
                            </div>
                            <div class="mb-2">
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">Below Requirement:</span>
                                    <span class="fw-bold text-success">{{ regulatory_data.financial_stability_indicators.capital_adequacy.banks_below_requirement }}</span>
                                </div>
                            </div>
                            <div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">Tier 1 Ratio:</span>
                                    <span class="fw-bold">{{ "%.1f"|format(regulatory_data.financial_stability_indicators.capital_adequacy.tier_1_capital_ratio) }%}</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <h6 class="text-muted mb-3">Asset Quality</h6>
                            <div class="mb-2">
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">NPL Ratio:</span>
                                    <span class="fw-bold text-success">{{ "%.1f"|format(regulatory_data.financial_stability_indicators.asset_quality.non_performing_loans) }%}</span>
                                </div>
                            </div>
                            <div class="mb-2">
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">Provision Coverage:</span>
                                    <span class="fw-bold">{{ "%.1f"|format(regulatory_data.financial_stability_indicators.asset_quality.provision_coverage) }%}</span>
                                </div>
                            </div>
                            <div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">Loan Loss Provisions:</span>
                                    <span class="fw-bold">{{ "%.1f"|format(regulatory_data.financial_stability_indicators.asset_quality.loan_loss_provisions) }%}</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <h6 class="text-muted mb-3">Profitability</h6>
                            <div class="mb-2">
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">ROA:</span>
                                    <span class="fw-bold text-success">{{ "%.2f"|format(regulatory_data.financial_stability_indicators.profitability.return_on_assets) }%}</span>
                                </div>
                            </div>
                            <div class="mb-2">
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">ROE:</span>
                                    <span class="fw-bold text-success">{{ "%.1f"|format(regulatory_data.financial_stability_indicators.profitability.return_on_equity) }%}</span>
                                </div>
                            </div>
                            <div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">Net Interest Margin:</span>
                                    <span class="fw-bold">{{ "%.2f"|format(regulatory_data.financial_stability_indicators.profitability.net_interest_margin) }%}</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <h6 class="text-muted mb-3">Liquidity</h6>
                            <div class="mb-2">
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">Avg LCR:</span>
                                    <span class="fw-bold text-success">{{ "%.1f"|format(regulatory_data.financial_stability_indicators.liquidity.avg_liquidity_ratio) }%}</span>
                                </div>
                            </div>
                            <div class="mb-2">
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">Loan-to-Deposit:</span>
                                    <span class="fw-bold">{{ "%.1f"|format(regulatory_data.financial_stability_indicators.liquidity.loan_to_deposit_ratio) }%}</span>
                                </div>
                            </div>
                            <div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">Funding Stability:</span>
                                    <span class="badge bg-success">{{ regulatory_data.financial_stability_indicators.liquidity.funding_stability }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Regulatory Developments -->
    <div class="row">
        <div class="col-md-6">
            <div class="card border-0">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-calendar-plus me-2"></i>
                        Upcoming Regulations
                    </h5>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled mb-0">
                        {% for regulation in regulatory_data.regulatory_developments.upcoming_regulations %}
                        <li class="mb-2">
                            <i class="fas fa-clock text-primary me-2"></i>
                            {{ regulation }}
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card border-0">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-globe me-2"></i>
                        International Coordination
                    </h5>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled mb-0">
                        {% for coordination in regulatory_data.regulatory_developments.international_coordination %}
                        <li class="mb-2">
                            <i class="fas fa-handshake text-info me-2"></i>
                            {{ coordination }}
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}