{% extends "sovereign/layout.html" %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
<div class="main-content">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0 text-white">
            <i class="fas fa-university text-primary me-2"></i>
            Sovereign Banking Operations
        </h1>
        <div class="text-white-50">
            <i class="fas fa-clock me-1"></i>
            Last Updated: <span id="last-updated">{{ current_time.strftime('%B %d, %Y %I:%M %p') if current_time else '' }}</span>
        </div>
    </div>

    <!-- Key Metrics Overview -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card bg-gradient-primary border-0">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div class="flex-grow-1">
                            <h6 class="card-subtitle mb-1 text-white-50">Base Interest Rate</h6>
                            <h4 class="card-title text-white mb-0">{{ "%.2f"|format(dashboard_data.monetary_policy.base_rate) }%}</h4>
                        </div>
                        <div class="bg-light bg-opacity-20 rounded p-2">
                            <i class="fas fa-percentage text-white"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-gradient-success border-0">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div class="flex-grow-1">
                            <h6 class="card-subtitle mb-1 text-white-50">Sovereign Debt</h6>
                            <h4 class="card-title text-white mb-0">${{ "%.1f"|format(dashboard_data.sovereign_debt.total_debt_trillions) }}T</h4>
                        </div>
                        <div class="bg-light bg-opacity-20 rounded p-2">
                            <i class="fas fa-chart-line text-white"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-gradient-info border-0">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div class="flex-grow-1">
                            <h6 class="card-subtitle mb-1 text-white-50">International Reserves</h6>
                            <h4 class="card-title text-white mb-0">${{ "%.1f"|format(dashboard_data.international_reserves.total_reserves_billions) }}B</h4>
                        </div>
                        <div class="bg-light bg-opacity-20 rounded p-2">
                            <i class="fas fa-coins text-white"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-gradient-warning border-0">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div class="flex-grow-1">
                            <h6 class="card-subtitle mb-1 text-white-50">Banking Assets</h6>
                            <h4 class="card-title text-white mb-0">${{ "%.1f"|format(dashboard_data.banking_sector.total_assets_trillions) }}T</h4>
                        </div>
                        <div class="bg-light bg-opacity-20 rounded p-2">
                            <i class="fas fa-university text-white"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sovereign Banking Operations -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card border-0">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-cogs me-2"></i>
                        Central Bank Operations
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-6">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-muted mb-1">Policy Stance</h6>
                                <h5 class="text-primary">{{ dashboard_data.monetary_policy.policy_stance }}</h5>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-muted mb-1">Inflation Target</h6>
                                <h5 class="text-success">{{ "%.1f"|format(dashboard_data.monetary_policy.inflation_target) }%}</h5>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <small class="text-muted">
                            Next Policy Meeting: {{ dashboard_data.monetary_policy.next_meeting }}
                        </small>
                    </div>
                    <div class="mt-3">
                        <a href="{{ url_for('sovereign.central_bank') }}" class="btn btn-outline-primary btn-sm">
                            <i class="fas fa-external-link-alt me-1"></i>
                            View Operations
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card border-0">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-chart-pie me-2"></i>
                        Sovereign Debt Portfolio
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-6">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-muted mb-1">Debt-to-GDP</h6>
                                <h5 class="text-warning">{{ "%.1f"|format(dashboard_data.sovereign_debt.debt_to_gdp_ratio) }%}</h5>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-muted mb-1">Credit Rating</h6>
                                <h5 class="text-success">{{ dashboard_data.sovereign_debt.credit_rating }}</h5>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <small class="text-muted">
                            Status: {{ dashboard_data.sovereign_debt.debt_sustainability }}
                        </small>
                    </div>
                    <div class="mt-3">
                        <a href="{{ url_for('sovereign.sovereign_debt') }}" class="btn btn-outline-success btn-sm">
                            <i class="fas fa-external-link-alt me-1"></i>
                            Manage Debt
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- International Reserves & FX Operations -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card border-0">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-globe me-2"></i>
                        International Reserves
                    </h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <h6 class="text-muted mb-1">Total Reserves</h6>
                        <h4 class="text-primary">${{ "%.1f"|format(dashboard_data.international_reserves.total_reserves_billions) }}B</h4>
                    </div>
                    <div class="mb-3">
                        <h6 class="text-muted mb-1">Import Coverage</h6>
                        <h5 class="text-success">{{ "%.1f"|format(dashboard_data.international_reserves.reserves_coverage_months) }} months</h5>
                    </div>
                    <div class="progress mb-2" style="height: 8px;">
                        <div class="progress-bar bg-warning" style="width: {{ dashboard_data.international_reserves.gold_percentage }%}"></div>
                    </div>
                    <small class="text-muted">Gold: {{ "%.1f"|format(dashboard_data.international_reserves.gold_percentage) }%}</small>
                    <div class="mt-3">
                        <a href="{{ url_for('sovereign.reserves') }}" class="btn btn-outline-info btn-sm">
                            <i class="fas fa-external-link-alt me-1"></i>
                            Manage Reserves
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-0">
                <div class="card-header bg-warning text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-exchange-alt me-2"></i>
                        Foreign Exchange
                    </h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <h6 class="text-muted mb-1">Exchange Rate</h6>
                        <h5 class="text-primary">{{ dashboard_data.international_reserves.currency_composition.USD }%} USD</h5>
                    </div>
                    <div class="mb-3">
                        <h6 class="text-muted mb-1">Rate Stability</h6>
                        <h6 class="text-success">{{ dashboard_data.economic_indicators.exchange_rate_stability }}</h6>
                    </div>
                    <div class="mt-3">
                        <a href="{{ url_for('sovereign.foreign_exchange') }}" class="btn btn-outline-warning btn-sm">
                            <i class="fas fa-external-link-alt me-1"></i>
                            FX Operations
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-0">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-shield-alt me-2"></i>
                        Banking Regulation
                    </h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <h6 class="text-muted mb-1">Capital Adequacy</h6>
                        <h5 class="text-success">{{ "%.1f"|format(dashboard_data.banking_sector.capital_adequacy_ratio) }%}</h5>
                    </div>
                    <div class="mb-3">
                        <h6 class="text-muted mb-1">Stress Test</h6>
                        <h6 class="text-success">{{ dashboard_data.banking_sector.stress_test_results }}</h6>
                    </div>
                    <div class="mt-3">
                        <a href="{{ url_for('sovereign.regulatory') }}" class="btn btn-outline-secondary btn-sm">
                            <i class="fas fa-external-link-alt me-1"></i>
                            Supervision
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Economic Indicators -->
    <div class="row">
        <div class="col-12">
            <div class="card border-0">
                <div class="card-header bg-dark text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-chart-area me-2"></i>
                        Key Economic Indicators
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-2 text-center">
                            <h6 class="text-muted mb-1">GDP Growth</h6>
                            <h5 class="text-success">{{ "%.1f"|format(dashboard_data.economic_indicators.gdp_growth) }%}</h5>
                        </div>
                        <div class="col-md-2 text-center">
                            <h6 class="text-muted mb-1">Unemployment</h6>
                            <h5 class="text-info">{{ "%.1f"|format(dashboard_data.economic_indicators.unemployment_rate) }%}</h5>
                        </div>
                        <div class="col-md-2 text-center">
                            <h6 class="text-muted mb-1">Current Account</h6>
                            <h5 class="text-primary">{{ "%.1f"|format(dashboard_data.economic_indicators.current_account_balance) }%}</h5>
                        </div>
                        <div class="col-md-2 text-center">
                            <h6 class="text-muted mb-1">Fiscal Balance</h6>
                            <h5 class="text-warning">{{ "%.1f"|format(dashboard_data.economic_indicators.fiscal_balance) }%}</h5>
                        </div>
                        <div class="col-md-2 text-center">
                            <h6 class="text-muted mb-1">NPL Ratio</h6>
                            <h5 class="text-success">{{ "%.1f"|format(dashboard_data.banking_sector.non_performing_loans) }%}</h5>
                        </div>
                        <div class="col-md-2 text-center">
                            <h6 class="text-muted mb-1">LCR</h6>
                            <h5 class="text-success">{{ "%.1f"|format(dashboard_data.banking_sector.liquidity_coverage_ratio) }%}</h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.bg-gradient-primary {
    background: linear-gradient(135deg, #0066cc 0%, #004499 100%);
}
.bg-gradient-success {
    background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
}
.bg-gradient-info {
    background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
}
.bg-gradient-warning {
    background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%);
}
</style>
{% endblock %}