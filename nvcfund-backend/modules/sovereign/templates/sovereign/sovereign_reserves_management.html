{% extends "sovereign/layout.html" %}

{% block title %}International Reserves Management{% endblock %}

{% block content %}
<div class="main-content">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0 text-white">
            <i class="fas fa-coins text-primary me-2"></i>
            International Reserves Management
        </h1>
        <div class="text-white-50">
            <i class="fas fa-chart-pie me-1"></i>
            Total Reserves: ${{ "%.1f"|format(reserves_data.reserves_composition.total_reserves_billions) }}B
        </div>
    </div>

    <!-- Reserves Composition Overview -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card border-0">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-dollar-sign me-2"></i>
                        Foreign Currency Reserves
                    </h5>
                </div>
                <div class="card-body">
                    <div class="text-center mb-3">
                        <h2 class="text-primary">${{ "%.1f"|format(reserves_data.reserves_composition.breakdown.foreign_currency_reserves.amount_billions) }}B</h2>
                        <p class="text-muted">{{ "%.1f"|format(reserves_data.reserves_composition.breakdown.foreign_currency_reserves.percentage) }%} of Total</p>
                    </div>
                    <h6 class="text-muted mb-2">Currency Breakdown</h6>
                    {% for currency, percentage in reserves_data.reserves_composition.breakdown.foreign_currency_reserves.currency_breakdown.items() %}
                    <div class="d-flex justify-content-between mb-2">
                        <span class="text-muted">{{ currency }}:</span>
                        <span class="fw-bold">{{ "%.1f"|format(percentage) }%}</span>
                    </div>
                    <div class="progress mb-2" style="height: 6px;">
                        <div class="progress-bar bg-{% if currency == 'USD' %}primary{% elif currency == 'EUR' %}success{% elif currency == 'GBP' %}info{% elif currency == 'JPY' %}warning{% else %}secondary{% endif %}" 
                             style="width: {{ percentage }%}"></div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-0">
                <div class="card-header bg-warning text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-coins me-2"></i>
                        Gold Reserves
                    </h5>
                </div>
                <div class="card-body">
                    <div class="text-center mb-3">
                        <h2 class="text-warning">${{ "%.1f"|format(reserves_data.reserves_composition.breakdown.gold_reserves.amount_billions) }}B</h2>
                        <p class="text-muted">{{ "%.1f"|format(reserves_data.reserves_composition.breakdown.gold_reserves.percentage) }%} of Total</p>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <div class="text-center p-2 border rounded">
                                <small class="text-muted">Troy Ounces</small>
                                <div class="fw-bold">{{ "%.1f"|format(reserves_data.reserves_composition.breakdown.gold_reserves.troy_ounces_millions) }}M</div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="text-center p-2 border rounded">
                                <small class="text-muted">Price/Ounce</small>
                                <div class="fw-bold text-warning">${{ "%.0f"|format(reserves_data.reserves_composition.breakdown.gold_reserves.market_value_per_ounce) }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-0">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-globe me-2"></i>
                        Special Drawing Rights
                    </h5>
                </div>
                <div class="card-body">
                    <div class="text-center mb-3">
                        <h2 class="text-info">${{ "%.1f"|format(reserves_data.reserves_composition.breakdown.special_drawing_rights.amount_billions) }}B</h2>
                        <p class="text-muted">{{ "%.1f"|format(reserves_data.reserves_composition.breakdown.special_drawing_rights.percentage) }%} of Total</p>
                    </div>
                    <div class="text-center">
                        <div class="p-2 border rounded">
                            <small class="text-muted">IMF Allocation</small>
                            <div class="fw-bold">${{ "%.1f"|format(reserves_data.reserves_composition.breakdown.special_drawing_rights.allocation_billions) }}B</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Investment Strategy -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card border-0">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-chart-line me-2"></i>
                        Investment Strategy
                    </h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <h6 class="text-muted mb-2">Strategic Framework</h6>
                        <div class="mb-2">
                            <span class="text-muted">Return Objective:</span>
                            <span class="fw-bold ms-2">{{ reserves_data.reserves_management.investment_strategy.return_objective }}</span>
                        </div>
                        <div class="mb-2">
                            <span class="text-muted">Risk Tolerance:</span>
                            <span class="badge bg-success ms-2">{{ reserves_data.reserves_management.investment_strategy.risk_tolerance }}</span>
                        </div>
                        <div class="mb-2">
                            <span class="text-muted">Liquidity Requirement:</span>
                            <span class="badge bg-info ms-2">{{ reserves_data.reserves_management.investment_strategy.liquidity_requirement }}</span>
                        </div>
                        <div>
                            <span class="text-muted">Benchmark:</span>
                            <span class="fw-bold ms-2">{{ reserves_data.reserves_management.investment_strategy.benchmark }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card border-0">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-pie-chart me-2"></i>
                        Asset Allocation
                    </h5>
                </div>
                <div class="card-body">
                    {% for asset, percentage in reserves_data.reserves_management.asset_allocation.items() %}
                    <div class="mb-3">
                        <div class="d-flex justify-content-between mb-1">
                            <span class="text-muted">{{ asset.replace('_', ' ').title() }}:</span>
                            <span class="fw-bold">{{ "%.1f"|format(percentage) }%}</span>
                        </div>
                        <div class="progress" style="height: 6px;">
                            <div class="progress-bar bg-{% if 'government' in asset %}primary{% elif 'agency' in asset %}success{% elif 'corporate' in asset %}info{% elif 'deposit' in asset %}warning{% else %}secondary{% endif %}" 
                                 style="width: {{ percentage }%}"></div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <!-- Duration Management -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card border-0">
                <div class="card-header bg-dark text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-clock me-2"></i>
                        Duration Management
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-4">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-muted mb-1">Target</h6>
                                <h4 class="text-primary">{{ "%.1f"|format(reserves_data.reserves_management.duration_management.target_duration) }}</h4>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-muted mb-1">Current</h6>
                                <h4 class="text-success">{{ "%.1f"|format(reserves_data.reserves_management.duration_management.current_duration) }}</h4>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-muted mb-1">Range</h6>
                                <h6 class="text-info">{{ reserves_data.reserves_management.duration_management.duration_range }}</h6>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card border-0">
                <div class="card-header bg-warning text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-chart-area me-2"></i>
                        Performance Metrics
                    </h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">YTD Return:</span>
                            <span class="fw-bold text-success">{{ "%.2f"|format(reserves_data.performance_metrics.ytd_return) }%}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">1-Day VaR:</span>
                            <span class="fw-bold text-warning">{{ "%.2f"|format(reserves_data.performance_metrics.risk_metrics.value_at_risk_1d) }%}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Tracking Error:</span>
                            <span class="fw-bold text-info">{{ "%.2f"|format(reserves_data.performance_metrics.risk_metrics.tracking_error) }%}</span>
                        </div>
                    </div>
                    <div>
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Sharpe Ratio:</span>
                            <span class="fw-bold text-primary">{{ "%.2f"|format(reserves_data.performance_metrics.risk_metrics.sharpe_ratio) }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Historical Performance -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-0">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-history me-2"></i>
                        Historical Annual Returns
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        {% for year, return in reserves_data.performance_metrics.annual_returns.items() %}
                        <div class="col-md-3">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-muted mb-1">{{ year }}</h6>
                                <h5 class="text-{% if return > 0 %}success{% else %}danger{% endif %}">
                                    {{ "+" if return > 0 else "" }}{{ "%.2f"|format(return) }%}
                                </h5>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Operational Framework -->
    <div class="row">
        <div class="col-12">
            <div class="card border-0">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-cogs me-2"></i>
                        Operational Framework
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-muted mb-1">Governance</h6>
                                <h6 class="text-primary">{{ reserves_data.operational_framework.governance }}</h6>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-muted mb-1">External Managers</h6>
                                <h5 class="text-success">{{ reserves_data.operational_framework.external_managers }}</h5>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-muted mb-1">Custodian Banks</h6>
                                <h5 class="text-info">{{ reserves_data.operational_framework.custodian_banks }}</h5>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-muted mb-1">Reporting</h6>
                                <h6 class="text-warning">{{ reserves_data.operational_framework.reporting_frequency }}</h6>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Investment Guidelines:</span>
                            <span class="badge bg-success">{{ reserves_data.operational_framework.investment_guidelines }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}