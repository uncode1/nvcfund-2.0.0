<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Monitoring - NVC Banking</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background-color: #0a2447;
            color: #ffffff;
            font-family: 'Arial', sans-serif;
        }
        .main-content {
            min-height: 100vh;
            padding: 2rem;
        }
        .card {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border: 1px solid #66ccff;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(102, 204, 255, 0.3);
        }
        .card-header {
            background: linear-gradient(135deg, #0a2447 0%, #1e3c72 100%);
            border-bottom: 1px solid #66ccff;
            color: #66ccff;
            font-weight: bold;
        }
        .performance-metric {
            background: rgba(30, 60, 114, 0.3);
            border: 1px solid rgba(102, 204, 255, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }
        .performance-metric:hover {
            background: rgba(30, 60, 114, 0.5);
            transform: translateY(-2px);
        }
        .metric-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 10px;
        }
        .metric-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #66ccff;
        }
        .metric-trend {
            font-size: 0.9em;
            padding: 2px 6px;
            border-radius: 12px;
        }
        .trend-up { background: rgba(40, 167, 69, 0.2); color: #28a745; }
        .trend-down { background: rgba(220, 53, 69, 0.2); color: #dc3545; }
        .trend-stable { background: rgba(108, 117, 125, 0.2); color: #6c757d; }
        .chart-container {
            background: rgba(30, 60, 114, 0.2);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            height: 350px;
        }
        .threshold-indicator {
            width: 100%;
            height: 6px;
            background: linear-gradient(to right, #28a745 0%, #28a745 60%, #ffc107 60%, #ffc107 80%, #dc3545 80%, #dc3545 100%);
            border-radius: 3px;
            margin: 10px 0;
            position: relative;
        }
        .threshold-marker {
            position: absolute;
            top: -2px;
            width: 2px;
            height: 10px;
            background: #ffffff;
            transform: translateX(-50%);
        }
        .btn-primary {
            background: linear-gradient(135deg, #66ccff 0%, #4da6d9 100%);
            border: none;
            color: #0a2447;
            font-weight: bold;
        }
        .btn-outline-primary {
            border-color: #66ccff;
            color: #66ccff;
        }
        .btn-outline-primary:hover {
            background: #66ccff;
            color: #0a2447;
        }
        .alert-threshold {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid #ffc107;
            border-left: 4px solid #ffc107;
            border-radius: 0 8px 8px 0;
            padding: 12px;
            margin-bottom: 10px;
        }
        .form-control, .form-select {
            background: #1e3c72;
            border: 1px solid #66ccff;
            color: #ffffff;
        }
        .form-control:focus, .form-select:focus {
            background: #1e3c72;
            border-color: #66ccff;
            color: #ffffff;
            box-shadow: 0 0 0 0.2rem rgba(102, 204, 255, 0.25);
        }
    </style>
</head>
<body>
    <div class="main-content">
        <div class="container-fluid">
            <!-- Header -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h1><i class="fas fa-tachometer-alt"></i> Performance Monitoring</h1>
                            <p class="mb-0">Real-time system performance analysis and optimization insights</p>
                        </div>
                        <div>
                            <select class="form-select" style="width: auto;" onchange="changeTimeRange(this.value)">
                                <option value="1h">Last Hour</option>
                                <option value="24h" selected>Last 24 Hours</option>
                                <option value="7d">Last 7 Days</option>
                                <option value="30d">Last 30 Days</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Key Performance Indicators -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="performance-metric">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <div class="text-muted small">Response Time</div>
                                <div class="metric-value">125ms</div>
                                <span class="metric-trend trend-up">↓ 15ms</span>
                            </div>
                            <i class="fas fa-clock text-primary" style="font-size: 2em;"></i>
                        </div>
                        <div class="threshold-indicator">
                            <div class="threshold-marker" style="left: 25%;"></div>
                        </div>
                        <small class="text-muted">Target: <200ms | Alert: >500ms</small>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="performance-metric">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <div class="text-muted small">Throughput</div>
                                <div class="metric-value">3,456/s</div>
                                <span class="metric-trend trend-up">↑ 23%</span>
                            </div>
                            <i class="fas fa-exchange-alt text-success" style="font-size: 2em;"></i>
                        </div>
                        <div class="threshold-indicator">
                            <div class="threshold-marker" style="left: 69%;"></div>
                        </div>
                        <small class="text-muted">Peak: 5,000/s | Capacity: 10,000/s</small>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="performance-metric">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <div class="text-muted small">Error Rate</div>
                                <div class="metric-value">0.03%</div>
                                <span class="metric-trend trend-down">↓ 0.01%</span>
                            </div>
                            <i class="fas fa-exclamation-triangle text-warning" style="font-size: 2em;"></i>
                        </div>
                        <div class="threshold-indicator">
                            <div class="threshold-marker" style="left: 6%;"></div>
                        </div>
                        <small class="text-muted">Target: <0.1% | Alert: >1%</small>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="performance-metric">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <div class="text-muted small">Availability</div>
                                <div class="metric-value">99.97%</div>
                                <span class="metric-trend trend-stable">Stable</span>
                            </div>
                            <i class="fas fa-shield-alt text-info" style="font-size: 2em;"></i>
                        </div>
                        <div class="threshold-indicator">
                            <div class="threshold-marker" style="left: 99%;"></div>
                        </div>
                        <small class="text-muted">SLA: 99.95% | Uptime: 14d 6h</small>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- Response Time Analysis -->
                <div class="col-md-6">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5><i class="fas fa-chart-line"></i> Response Time Trends</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="responseTimeChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Throughput Analysis -->
                <div class="col-md-6">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5><i class="fas fa-chart-area"></i> Transaction Throughput</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="throughputChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- Database Performance -->
                <div class="col-md-4">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5><i class="fas fa-database"></i> Database Performance</h5>
                        </div>
                        <div class="card-body">
                            <div class="performance-metric">
                                <div class="text-muted small">Query Response Time</div>
                                <div class="metric-value text-success">8.2ms</div>
                                <div class="progress mt-2">
                                    <div class="progress-bar bg-success" style="width: 18%"></div>
                                </div>
                                <small class="text-muted">Avg: 8.2ms | Max: 45ms</small>
                            </div>

                            <div class="performance-metric">
                                <div class="text-muted small">Connections</div>
                                <div class="metric-value text-info">47/200</div>
                                <div class="progress mt-2">
                                    <div class="progress-bar bg-info" style="width: 23.5%"></div>
                                </div>
                                <small class="text-muted">Active: 47 | Pool: 200</small>
                            </div>

                            <div class="performance-metric">
                                <div class="text-muted small">Cache Hit Rate</div>
                                <div class="metric-value text-warning">94.7%</div>
                                <div class="progress mt-2">
                                    <div class="progress-bar bg-warning" style="width: 94.7%"></div>
                                </div>
                                <small class="text-muted">Target: >95% | Current: 94.7%</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- API Performance -->
                <div class="col-md-4">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5><i class="fas fa-code"></i> API Performance</h5>
                        </div>
                        <div class="card-body">
                            <div class="performance-metric">
                                <div class="text-muted small">Banking API</div>
                                <div class="metric-value text-success">45ms</div>
                                <div class="d-flex justify-content-between">
                                    <small class="text-muted">Avg: 45ms</small>
                                    <span class="metric-trend trend-up">↑ 2ms</span>
                                </div>
                            </div>

                            <div class="performance-metric">
                                <div class="text-muted small">Payment Gateway</div>
                                <div class="metric-value text-warning">122ms</div>
                                <div class="d-flex justify-content-between">
                                    <small class="text-muted">Avg: 122ms</small>
                                    <span class="metric-trend trend-down">↓ 8ms</span>
                                </div>
                            </div>

                            <div class="performance-metric">
                                <div class="text-muted small">Authentication</div>
                                <div class="metric-value text-success">23ms</div>
                                <div class="d-flex justify-content-between">
                                    <small class="text-muted">Avg: 23ms</small>
                                    <span class="metric-trend trend-stable">Stable</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Resource Utilization -->
                <div class="col-md-4">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5><i class="fas fa-server"></i> Resource Utilization</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container" style="height: 250px;">
                                <canvas id="resourceChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Performance Alerts -->
            <div class="row">
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-bell"></i> Performance Alerts & Recommendations</h5>
                        </div>
                        <div class="card-body">
                            <div class="alert-threshold">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <strong><i class="fas fa-exclamation-triangle"></i> Cache Performance Warning</strong>
                                        <div class="mt-1">Database cache hit rate has dropped below 95% threshold (94.7%).</div>
                                        <div class="text-muted small mt-1">Recommendation: Consider cache warming or query optimization.</div>
                                    </div>
                                    <small class="text-muted">3 mins ago</small>
                                </div>
                            </div>

                            <div class="alert-threshold">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <strong><i class="fas fa-info-circle"></i> Traffic Surge Detected</strong>
                                        <div class="mt-1">Transaction throughput increased by 23% in the last hour.</div>
                                        <div class="text-muted small mt-1">Recommendation: Monitor for scaling if trend continues.</div>
                                    </div>
                                    <small class="text-muted">8 mins ago</small>
                                </div>
                            </div>

                            <div class="alert-threshold">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <strong><i class="fas fa-check-circle"></i> Response Time Improved</strong>
                                        <div class="mt-1">Average response time decreased by 15ms following optimization.</div>
                                        <div class="text-muted small mt-1">Status: Performance improvement confirmed.</div>
                                    </div>
                                    <small class="text-muted">15 mins ago</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Performance Controls -->
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-tools"></i> Performance Tools</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <button class="btn btn-outline-primary btn-sm" onclick="runPerformanceTest()">
                                    <i class="fas fa-play"></i> Run Load Test
                                </button>
                                <button class="btn btn-outline-primary btn-sm" onclick="optimizeCache()">
                                    <i class="fas fa-memory"></i> Optimize Cache
                                </button>
                                <button class="btn btn-outline-primary btn-sm" onclick="analyzeQueries()">
                                    <i class="fas fa-search"></i> Analyze Slow Queries
                                </button>
                                <button class="btn btn-outline-primary btn-sm" onclick="generateReport()">
                                    <i class="fas fa-file-alt"></i> Generate Report
                                </button>
                            </div>

                            <hr>

                            <h6>Threshold Settings</h6>
                            <div class="mb-2">
                                <label class="form-label small">Response Time Alert (ms)</label>
                                <input type="number" class="form-control form-control-sm" value="500">
                            </div>
                            <div class="mb-2">
                                <label class="form-label small">Error Rate Alert (%)</label>
                                <input type="number" class="form-control form-control-sm" value="1" step="0.1">
                            </div>
                            <div class="mb-2">
                                <label class="form-label small">CPU Usage Alert (%)</label>
                                <input type="number" class="form-control form-control-sm" value="80">
                            </div>
                            <button class="btn btn-primary btn-sm w-100 mt-2">
                                <i class="fas fa-save"></i> Save Settings
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Chart configurations
        const chartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: {
                        color: '#ffffff'
                    }
                }
            },
            scales: {
                x: {
                    grid: {
                        color: 'rgba(102, 204, 255, 0.1)'
                    },
                    ticks: {
                        color: '#ffffff'
                    }
                },
                y: {
                    grid: {
                        color: 'rgba(102, 204, 255, 0.1)'
                    },
                    ticks: {
                        color: '#ffffff'
                    }
                }
            }
        };

        // Response Time Chart
        const responseCtx = document.getElementById('responseTimeChart').getContext('2d');
        new Chart(responseCtx, {
            type: 'line',
            data: {
                labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00'],
                datasets: [{
                    label: 'Average Response Time (ms)',
                    data: [140, 125, 115, 125, 130, 120, 125],
                    borderColor: '#66ccff',
                    backgroundColor: 'rgba(102, 204, 255, 0.1)',
                    tension: 0.4,
                    fill: true
                }, {
                    label: 'P95 Response Time (ms)',
                    data: [280, 245, 235, 250, 265, 240, 245],
                    borderColor: '#ffc107',
                    backgroundColor: 'rgba(255, 193, 7, 0.1)',
                    tension: 0.4,
                    fill: false
                }]
            },
            options: chartOptions
        });

        // Throughput Chart
        const throughputCtx = document.getElementById('throughputChart').getContext('2d');
        new Chart(throughputCtx, {
            type: 'line',
            data: {
                labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00'],
                datasets: [{
                    label: 'Transactions per Second',
                    data: [2800, 1200, 2400, 3456, 3200, 2900, 2600],
                    borderColor: '#28a745',
                    backgroundColor: 'rgba(40, 167, 69, 0.2)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: chartOptions
        });

        // Resource Utilization Chart
        const resourceCtx = document.getElementById('resourceChart').getContext('2d');
        new Chart(resourceCtx, {
            type: 'doughnut',
            data: {
                labels: ['Used', 'Available'],
                datasets: [{
                    label: 'CPU',
                    data: [24.7, 75.3],
                    backgroundColor: ['#ffc107', 'rgba(255, 193, 7, 0.2)']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: '#ffffff'
                        }
                    }
                }
            }
        });

        function changeTimeRange(range) {
            console.log('Changing time range to:', range);
            // This would trigger chart data updates in production
        }

        function runPerformanceTest() {
            alert('Starting performance load test...');
        }

        function optimizeCache() {
            alert('Optimizing cache configuration...');
        }

        function analyzeQueries() {
            alert('Analyzing slow database queries...');
        }

        function generateReport() {
            alert('Generating performance report...');
        }

        // Auto-refresh data every 30 seconds
        setInterval(function() {
            console.log('Refreshing performance metrics...');
            // This would update charts with real data in production
        }, 30000);
    </script>
</body>
</html>