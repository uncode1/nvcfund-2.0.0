<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treasury Dashboard - NVC Banking</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="{{ url_for('static', filename='css/text_contrast_fix.css') }}" rel="stylesheet">
    <style>
        body { background: #0f172a !important; color: #e2e8f0 !important; font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', system-ui, sans-serif !important; margin: 0; padding: 20px; }
        .dashboard-stat-card { background: #1e293b !important; border: 1px solid #334155 !important; border-radius: 8px !important; padding: 1.5rem; margin-bottom: 1rem; }
        .card { background: #1e293b !important; border: 1px solid #334155 !important; color: #e2e8f0 !important; }
        .btn-primary { background: #3b82f6 !important; border-color: #3b82f6 !important; }
        .table-dark { background: #1e293b !important; }
        .table-dark td, .table-dark th { border-color: #334155 !important; color: #e2e8f0 !important; }
    </style>
</head>
<body>


<div class="container-fluid mt-4">
    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="dashboard-stat-card">
                <div class="card-header">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h3 class="mb-0">
                                <i class="fas fa-tachometer-alt me-2"></i>Treasury Operations
                            </h3>
                            <small class="text-light">Enterprise banking operations dashboard</small>
                        </div>
                        <div class="btn-group">
                            <a href="{{ url_for('treasury.overview') }}" class="btn btn-outline-info">
                                <i class="fas fa-chart-bar me-2"></i>Overview
                            </a>
                            <a href="{{ url_for('treasury.cash_flow') }}" class="btn btn-outline-success">
                                <i class="fas fa-money-bill-wave me-2"></i>Cash Flow
                            </a>
                            <a href="{{ url_for('treasury.asset_liability_management') }}" class="btn btn-outline-primary">
                                <i class="fas fa-balance-scale me-2"></i>ALM
                            </a>
                            <a href="{{ url_for('treasury.money_market') }}" class="btn btn-outline-secondary">
                                <i class="fas fa-coins me-2"></i>Money Market
                            </a>
                            <a href="{{ url_for('treasury.fx_operations') }}" class="btn btn-outline-info">
                                <i class="fas fa-exchange-alt me-2"></i>FX Ops
                            </a>
                            <a href="{{ url_for('treasury.risk_management') }}" class="btn btn-outline-danger">
                                <i class="fas fa-shield-alt me-2"></i>Risk
                            </a>
                            <a href="{{ url_for('treasury.settings') }}" class="btn btn-outline-warning">
                                <i class="fas fa-cog me-2"></i>Settings
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Key Metrics - Now Clickable for Drill-Down -->
    <div class="row mb-4">
        <div class="col-md-3">
            <a href="{{ url_for('treasury.cash_flow_analysis') }}" class="text-decoration-none">
                <div class="card dashboard-stat-card hover-card">
                    <div class="card-body text-center">
                        <i class="fas fa-check-circle fa-3x text-success mb-3"></i>
                        <h5 class="text-light">Operations</h5>
                        <h3 class="text-success">1,200</h3>
                        <small class="text-light">Successful</small>
                        <div class="mt-2">
                            <small class="text-info"><i class="fas fa-arrow-right me-1"></i>Cash Flow Details</small>
                        </div>
                    </div>
                </div>
            </a>
        </div>
        <div class="col-md-3">
            <a href="{{ url_for('treasury.liquidity_management') }}" class="text-decoration-none">
                <div class="card dashboard-stat-card hover-card">
                    <div class="card-body text-center">
                        <i class="fas fa-clock fa-3x text-warning mb-3"></i>
                        <h5 class="text-light">Pending</h5>
                        <h3 class="text-warning">25</h3>
                        <small class="text-light">In Progress</small>
                        <div class="mt-2">
                            <small class="text-info"><i class="fas fa-arrow-right me-1"></i>Liquidity Analysis</small>
                        </div>
                    </div>
                </div>
            </a>
        </div>
        <div class="col-md-3">
            <a href="{{ url_for('treasury.investment_portfolio') }}" class="text-decoration-none">
                <div class="card dashboard-stat-card hover-card">
                    <div class="card-body text-center">
                        <i class="fas fa-dollar-sign fa-3x text-info mb-3"></i>
                        <h5 class="text-light">Volume</h5>
                        <h3 class="text-info">$2.5M</h3>
                        <small class="text-light">Monthly</small>
                        <div class="mt-2">
                            <small class="text-info"><i class="fas fa-arrow-right me-1"></i>Portfolio Details</small>
                        </div>
                    </div>
                </div>
            </a>
        </div>
        <div class="col-md-3">
            <a href="{{ url_for('treasury.risk_assessment') }}" class="text-decoration-none">
                <div class="card dashboard-stat-card hover-card">
                    <div class="card-body text-center">
                        <i class="fas fa-shield-alt fa-3x text-danger mb-3"></i>
                        <h5 class="text-light">Security</h5>
                        <h3 class="text-success">100%</h3>
                        <small class="text-light">Compliant</small>
                        <div class="mt-2">
                            <small class="text-info"><i class="fas fa-arrow-right me-1"></i>Risk Analysis</small>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <!-- Enhanced Treasury Operations Cards -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card bg-dark border-primary">
                <div class="card-header">
                    <h5 class="text-white mb-0">
                        <i class="fas fa-money-bill-wave me-2"></i>Cash Management
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-6">
                            <h6 class="text-primary">Daily Position</h6>
                            <h4 class="text-success">$125M</h4>
                        </div>
                        <div class="col-6">
                            <h6 class="text-primary">Reserve Ratio</h6>
                            <h4 class="text-info">12.5%</h4>
                        </div>
                    </div>
                    <div class="progress mt-2">
                        <div class="progress-bar bg-success" role="progressbar" style="width: 85%"></div>
                    </div>
                    <small class="text-light">Liquidity Status: Optimal</small>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card bg-dark border-info">
                <div class="card-header">
                    <h5 class="text-white mb-0">
                        <i class="fas fa-exchange-alt me-2"></i>FX Operations
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-6">
                            <h6 class="text-info">Total Exposure</h6>
                            <h4 class="text-warning">$58M</h4>
                        </div>
                        <div class="col-6">
                            <h6 class="text-info">Hedged</h6>
                            <h4 class="text-success">85.2%</h4>
                        </div>
                    </div>
                    <div class="progress mt-2">
                        <div class="progress-bar bg-success" role="progressbar" style="width: 85%"></div>
                    </div>
                    <small class="text-light">Daily P&L: +$125K</small>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card bg-dark border-warning">
                <div class="card-header">
                    <h5 class="text-white mb-0">
                        <i class="fas fa-balance-scale me-2"></i>ALM Overview
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-6">
                            <h6 class="text-warning">Duration Gap</h6>
                            <h4 class="text-info">2.3 years</h4>
                        </div>
                        <div class="col-6">
                            <h6 class="text-warning">Net Interest Margin</h6>
                            <h4 class="text-success">3.25%</h4>
                        </div>
                    </div>
                    <div class="progress mt-2">
                        <div class="progress-bar bg-info" role="progressbar" style="width: 75%"></div>
                    </div>
                    <small class="text-light">Interest Rate Risk: Moderate</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Money Market & Risk Management -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card bg-dark border-success">
                <div class="card-header">
                    <h5 class="text-white mb-0">
                        <i class="fas fa-coins me-2"></i>Money Market Operations
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-6">
                            <h6 class="text-success">Interbank Lending</h6>
                            <h4 class="text-info">$75M</h4>
                            <small class="text-light">CD Portfolio: $180M</small>
                        </div>
                        <div class="col-6">
                            <h6 class="text-success">Federal Funds</h6>
                            <h4 class="text-warning">5.25%</h4>
                            <small class="text-light">LIBOR: 5.45%</small>
                        </div>
                    </div>
                    <div class="mt-3">
                        <span class="badge bg-success me-2">Repo: $25M</span>
                        <span class="badge bg-info">Commercial Paper: $45M</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card bg-dark border-danger">
                <div class="card-header">
                    <h5 class="text-white mb-0">
                        <i class="fas fa-shield-alt me-2"></i>Risk Management
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-6">
                            <h6 class="text-danger">Credit Risk</h6>
                            <h4 class="text-warning">BBB+</h4>
                            <small class="text-light">NPL Ratio: 0.8%</small>
                        </div>
                        <div class="col-6">
                            <h6 class="text-danger">Market Risk</h6>
                            <h4 class="text-info">$2.5M</h4>
                            <small class="text-light">Value at Risk</small>
                        </div>
                    </div>
                    <div class="mt-3">
                        <span class="badge bg-success me-2">Risk Score: 85.5</span>
                        <span class="badge bg-warning">Incidents: 2</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Activity -->
    <div class="row">
        <div class="col-12">
            <div class="card bg-dark border-secondary">
                <div class="card-header bg-gradient text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-history me-2"></i>Recent Activity
                    </h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-dark table-striped">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th>Action</th>
                                    <th>Status</th>
                                    <th>User</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span id="current-time">{{ current_time.strftime('%H:%M:%S') if current_time else '' }}</span></td>
                                    <td>Treasury Operations Operation</td>
                                    <td><span class="badge bg-success">Success</span></td>
                                    <td>{{ user.username }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}